@(wishlist:Wishlist,wishes:Seq[Wish],addWishForm:Form[String])(implicit flash:Flash, currentRecipient: Option[Recipient])

@import helper._
@import wishlist._

@nautical(wishlist.title) {
	<li><a href="@routes.WishController.showWishlist(wishlist.recipient.username,wishlist.wishlistId.get)">wishlist</a></li>
}{
	
	<div id="view-wishlist-page">


        @for(error <- addWishForm.errors){
        <p class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert">Ã—</button>
            @error.message: @error.key
        </p>
        }



        <div class="well" >
		
			<h3>@wishlist.title</h3>
		
			<p>A wishlist for <a href="@routes.RecipientController.showProfile(wishlist.recipient.username)">@wishlist.recipient.username</a></p>

			<p>@wishlist.description</p>


		</div>



		@if(wishes.size>0){

		<div class="well" id="wishlist-wishes">




			<h4>Wishes</h4>
			<table class="table table-striped">
				<tbody>
					@for(wish <- wishes){
                        @showwish(wishlist,wish)
					}
				</tbody>
			</table>
		</div>

		}


	@if(currentRecipient.isDefined && wishlist.recipient == currentRecipient.get){
		<div class="well" >
			@form(action = routes.WishController.addWishToWishlist(wishlist.recipient.username,wishlist.wishlistId.get), 'class -> "form-inline"){
				<input type="text" class="input-large" name="title" placeholder="New wish title" value="@addWishForm("title").value"/>
				<button class="btn btn-success input-medium" type="submit">add wish</button>
			}
		</div>



		<div class="well" >
			<div class="control-group">
				<div class="buttons">
					<a class="btn btn-warning input-small" href="@routes.WishController.showEditWishlist(wishlist.recipient.username,wishlist.wishlistId.get)">edit wishlist</a>
				</div>
			</div>
		</div>

        }

	
	</div>
@if(currentRecipient.isDefined && wishlist.recipient == currentRecipient.get){
<script type="text/javascript">
    $(document).ready(function(){
        $(".wish-modal")
            .each(function(e){
                var $modalWindow = $(this);
                $modalWindow.find(".wish-edit-button")
                    .click(function(e){
                        $modalWindow.find(".wish-read,.wish-edit").toggleClass("wish-noshow");
                    });
                $modalWindow.find(".wish-cancel-button")
                    .click(function(e){
                        $modalWindow.find(".wish-read,.wish-edit").toggleClass("wish-noshow");
                    });
            });
    });
</script>
}


}